<!DOCTYPE html>
<html>
<head>
    <title>Main Page</title>
    <script>
        // 토큰 가져오기
        function getAccessToken() {
            return localStorage.getItem("access_token");
        }

        function getIdToken() {
            return sessionStorage.getItem("id_token");
        }

        function getRefreshToken() {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; refresh_token=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // 로그아웃 처리
        function logout() {
            localStorage.removeItem("access_token");
            sessionStorage.removeItem("id_token");
            document.cookie = "refresh_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            alert("로그아웃 되었습니다.");
            location.reload();
        }

        // 로그인 상태 확인
        function checkLoginStatus() {
            const accessToken = getAccessToken();
            const refreshToken = getRefreshToken();

            if (accessToken && refreshToken) {
                document.getElementById("loginBtn").style.display = "none";
                document.getElementById("logoutBtn").style.display = "block";
            } else {
                document.getElementById("loginBtn").style.display = "block";
                document.getElementById("logoutBtn").style.display = "none";
            }
        }

        // 페이지 로딩 시 로그인 상태 확인
        window.onload = function() {
            checkLoginStatus();
        }
    </script>
</head>
<body>
    <h2>Welcome to the Main Page</h2>

    <!-- 로그인 버튼 -->
    <a href="/google/login/" id="loginBtn" style="display: none;">Google로 로그인</a>

    <!-- 로그아웃 버튼 -->
    <button onclick="logout()" id="logoutBtn" style="display: none;">로그아웃</button>
</body>
</html>
